<!doctype html>
<html>
  <head>
    <title>Unit Converter</title>
    <style>
      body { font-family: arial; }
      h1 { margin: 0; }
      input[type=text] {
        width: calc(100% - 7px);
        font-size: 20px;
        font-family: monospace;
        text-align: center;
      }
      .bdiv {
        display: inline;
        width: 50%;
        float: left;
      }
      .psel { width: 55px; }
      .usel { width: calc(100% - 60px); }
    </style>
  </head>
  <body>
    <div style = 'position:absolute;left:50%;width:600px;margin-left:-300px;'>
      <h1 style = 'width:100%;text-align:center;'>Unit Converter</h1>
      <select id = 'cat' onchange = 'UpdSels()' style = 'width:100%'>
        <option value = 'me'>Mass / Energy</option>
        <option value = 'dt'>Distance / Time</option>
        <option value = 'a'>Area</option>
        <option value = 'v'>Volume</option>
        <option value = 'd'>Density</option>
        <option value = 't'>Temperature</option>
        <option value = 'p'>Pressure</option>
      </select>
      <div class = 'bdiv'>
        <input type = 'text' id = 'val1' oninput = 'UC1()'><br>
        <select id = 'val1p' class = 'psel' onchange = 'UC2()'>
          <option value = '1e24'>yotta</option>
          <option value = '1e21'>zetta</option>
          <option value = '1e18'>exa</option>
          <option value = '1e15'>peta</option>
          <option value = '1e12'>tera</option>
          <option value = '1e9'>giga</option>
          <option value = '1e6'>mega</option>
          <option value = '1e3'>kilo</option>
          <option value = '100'>hecto</option>
          <option value = '10'>deca</option>
          <option value = '1' selected></option>
          <option value = '0.1'>deci</option>
          <option value = '0.01'>centi</option>
          <option value = '1e-3'>milli</option>
          <option value = '1e-6'>micro</option>
          <option value = '1e-9'>nano</option>
          <option value = '1e-12'>pico</option>
          <option value = '1e-15'>femto</option>
          <option value = '1e-18'>atto</option>
          <option value = '1e-21'>zepto</option>
          <option value = '1e-24'>yocto</option>
        </select>
        <select id = 'val1u' class = 'usel' onchange = 'UC2()'></select><br>
      </div>
      <div class = 'bdiv'>
        <input type = 'text' id = 'val2' oninput = 'UC2()'><br>
        <select id = 'val2p' class = 'psel' onchange = 'UC1()'>
          <option value = '1e24'>yotta</option>
          <option value = '1e21'>zetta</option>
          <option value = '1e18'>exa</option>
          <option value = '1e15'>peta</option>
          <option value = '1e12'>tera</option>
          <option value = '1e9'>giga</option>
          <option value = '1e6'>mega</option>
          <option value = '1e3'>kilo</option>
          <option value = '100'>hecto</option>
          <option value = '10'>deca</option>
          <option value = '1' selected></option>
          <option value = '0.1'>deci</option>
          <option value = '0.01'>centi</option>
          <option value = '1e-3'>milli</option>
          <option value = '1e-6'>micro</option>
          <option value = '1e-9'>nano</option>
          <option value = '1e-12'>pico</option>
          <option value = '1e-15'>femto</option>
          <option value = '1e-18'>atto</option>
          <option value = '1e-21'>zepto</option>
          <option value = '1e-24'>yocto</option>
        </select>
        <select id = 'val2u' class = 'usel' onchange = 'UC1()'></select>
      </div>
    </div>
    <script>
      var c = 299792458;
      var ef = 1 / c ** 2;
      var unitf = {
        'me': {
          'g': 0.001, 'kg': 1, 'mg': 1e-6, 'mt': 1000,
          'alb': 0.45359237, 'aoz': 0.028349523125,
          'ast': 6.35029318,
          'tlb': 0.3732417216, 'toz': 3.11034768e-2,
          'dwt': 1.55517384e-3, 'gr': 6.479891e-5,
          'mt': 3.2399455e-6, 'dr': 1.3499772916666666e-7, 'pr': 6.749886458333333e-9, 'bk': 2.8124526909722217e-10,
          'mm': 7.342e22, 'em': 5.97237e24, 'jm': 1.8982e27, 'sm': 1.9885e30,
          'j': ef,
          'cal': ef * 4.184, 'kcal': ef * 4184,
          'wh': ef * 3.6e3, 'kwh': ef * 3.6e6,
          'btu': ef * 1054.3503, 'th': ef * 1.0543503e8,
          'eg': ef * 1e-7,
          'fp': ef * 1.3558179483314004,
          'ev': ef * 1.6021766208e-19, 'ha': ef * 4.359744650e-18, 'ry': ef * 2.1798723248801804e-18,
          'gtnt': ef * 4.184e3, 'kgtnt': ef * 4.184e6, 'ttnt': ef * 4.184e9,
        },
        'dt': {
          'm': 1, 'km': 1000, 'cm': 0.01, 'mm': 0.001,
          'in': 0.0254, 'ft': 0.3048, 'yd': 0.9144, 'mi': 1609.344,
          'nm': 1852,
          'a': 1e-10,
          'cn': 20.1168, 'rd': 5.0292, 'lk': 0.201168,
          'au': 149597870700, 'ly': 9460730472580800, 'pc': 30856775814913670, 'hl': 1.403983299578572e+26,
          'mr': 1737100, 'er': 6378000, 'jr': 71492000, 'sr': 695700000,
          'fl': 201.168, 'fm': 1.8288, 'lg': 4828.032,
          'sec': c, 'min': c * 60, 'hr': c * 3600,
          'dy': c * 86400, 'wk': c * 604800, 'mth': c * 2629746, 'yr': c * 31556952,
          'pu': 1.616229e-35,
        },
        'a': {
          'm2': 1, 'cm2': 1e-4, 'mm2': 1e-6, 'km2': 1e6,
          'in2': 0.00064516, 'ft2': 0.09290304, 'yd2': 0.83612736, 'mi2': 2.589988110336e6,
          'ac': 4046.8564224,
          'are': 100, 'har': 10000,
          'bn': 1e-28,
          'plar': 2.612196180441e-70,
        },
        'v': {
          'm3': 1, 'cm3': 1e-6, 'mm3': 1e-9, 'km3': 1e9,
          'in3': 0.000016387064, 'ft3': 0.028316846592, 'yd3': 0.764554857984, 'mi3': 4.16818182544058e9,
          'l': 0.001, 'ml': 1e-6,
          'lgal': 0.003785411784, 'lqt': 0.000946352946, 'lpt': 0.000473176473, 'lcp': 0.0002365882365,
          'lfloz': 0.0000295735295625, 'ltbsp': 0.00001478676478125, 'ltsp': 0.00000492892159375,
          'dgal': 0.00440488377086, 'dqt': 0.001101220942715, 'dpt': 0.0005506104713575, 'dcp': 0.00027530523567875,
          'dfloz': 0.00003441315445984375, 'dtbsp': 0.000017206577229921875, 'dtsp': 0.000005735525743307292,
          'igal': 0.00454609, 'iqt': 0.0011365225, 'ipt': 0.00056826125, 'icp': 0.000284130625,
          'ifloz': 0.000035516328125, 'itbsp': 0.0000177581640625, 'itsp': 0.000005919388020833334,
          'lgcp': 0.000240,
          'mcp': 0.000250,
          'plvl': 4.221907220517977e-105,
        },
        'd': {
          'kgm3': 1,
          'gcm3': 0.001,
          'kgl': 0.001,
        },
        't': {
          'c': [1, 273.15], 'f': [5/9, 255.3722222222222],
          'k': [1, 0], 'r': [5/9, 0],
        },
        'p': {
          'pa': 1, 'kpa': 1000, 'mpa': 1e6,
          'psi': 6895,
          'bar': 101325,
          'tor': 133.32236842105263,
        },
      };
      var unitn = {
        'me': {
          'common mass units': {
            'g': 'gram', 'kg': 'kilogram', 'mg': 'milligram', 'mt': 'metric ton',
            'alb': 'pound', 'aoz': 'ounce',
            'ast': 'stone',
          },
          'troy units': {
            'tlb': 'troy pound', 'toz': 'troy ounce',
            'dwt': 'pennyweight', 'gr': 'grain',
            'mt': 'mite', 'dr': 'droit', 'pr': 'perit', 'bk': 'blank',
          },
          'astronomical bodies': {
            'mm': 'moon mass', 'em': 'earth mass', 'jm': 'jupiter mass', 'sm': 'solar mass',
          },
          'energy units': {
            'j': 'joule',
            'cal': 'calorie', 'kcal': 'food calorie',
            'wh': 'watt-hour', 'kwh': 'kilowatt-hour',
            'btu': 'british thermal unit', 'th': 'therm',
            'eg': 'erg',
            'fp': 'foot-pound',
            'ev': 'electronvolt', 'ha': 'hartree', 'ry': 'rydberg unit',
            'gtnt': 'gram of tnt', 'kgtnt': 'kilogram of tnt', 'ttnt': 'ton of tnt',
          },
        },
        'dt': {
          'common distance units': {
            'm': 'meter', 'km': 'kilometer', 'cm': 'centimeter', 'mm': 'milimeter',
            'in': 'inch', 'ft': 'foot', 'yd': 'yard', 'mi': 'mile',
            'nm': 'nautical mile',
            'a': 'angstrom',
          },
          'surveyor\'s units': {
            'cn': 'chain', 'rd': 'rod', 'lk': 'link',
          },
          'astronomical': {
            'au': 'astronomical unit', 'ly': 'light year', 'pc': 'parsec', 'hl': 'hubble length',
            'er': 'earth radius', 'jr': 'jupiter radius', 'sr': 'solar radius',
          },
          'old units': {
            'fl': 'furlong', 'fm': 'fathom', 'lg': 'league',
          },
          'time units': {
            'sec': 'second', 'min': 'minute', 'hr': 'hour',
            'dy': 'day', 'wk': 'week', 'mth': 'month', 'yr': 'year',
          },
          'pu': 'planck length / time',
        },
        'a': {
          'm2': 'square meter', 'cm2': 'square centimeter', 'mm2': 'square millimeter', 'km2': 'square kilometer',
          'in2': 'square inch', 'ft2': 'square foot', 'yd2': 'square yard', 'mi2': 'square mile',
          'ac': 'acre',
          'are': 'are', 'har': 'hectare',
          'bn': 'barn',
          'plar': 'planck area',
        },
        'v': {
          'm3': 'cubic meter', 'cm3': 'cubic centimeter', 'mm3': 'cubic millimeter', 'km3': 'cubic kilometer',
          'in3': 'cubic inch', 'ft3': 'cubic foot', 'yd3': 'cubic yard', 'mi3': 'cubic mile',
          'l': 'liter', 'ml': 'milliliter',
          'us liquid': {
            'lgal': 'gallon', 'lqt': 'quart', 'lpt': 'pint', 'lcp': 'cup',
            'lfloz': 'fluid ounce', 'ltbsp': 'tablespoon', 'ltsp': 'teaspoon',
          },
          'us dry': {
            'dgal': 'gallon', 'dqt': 'quart', 'dpt': 'pint', 'dcp': 'cup',
            'dfloz': 'fluid ounce', 'dtbsp': 'tablespoon', 'dtsp': 'teaspoon',
          },
          'imperial': {
            'igal': 'gallon', 'iqt': 'quart', 'ipt': 'pint', 'icp': 'cup',
            'ifloz': 'fluid ounce', 'itbsp': 'tablespoon', 'itsp': 'teaspoon',
          },
          'lgcp': 'legal cup',
          'mcp': 'metric cup',
          'plvl': 'planck volume',
        },
        'd': {
          'kgm3': 'kilogram per m3',
          'gcm3': 'grams per cm3',
          'kgl': 'kilogram per liter',
        },
        't': {
          'c': 'celsius', 'f': 'fahrenheit',
          'k': 'kelvin', 'r': 'rankine',
        },
        'p': {
          'pa': 'pascal', 'kpa': 'kilopascal', 'mpa': 'megapascal',
          'psi': 'pounds per square inch',
          'bar': 'bar',
          'tor': 'torr',
        },
      };
      function UpdSels() {
        var o = unitn[cat.value], st = '';
        for (var i in o) {
          if (typeof o[i] == 'object') {
            var p = o[i], st2 = '';
            for (var j in p) {
              st2 += '<option value = "' + j + '">' + p[j] + '</option>';
            }
            st += '<optgroup label = "' + i + '">' + st2 + '</optgroup>';
          } else st += '<option value = "' + i + '">' + o[i] + '</option>';
        }
        val1u.innerHTML = st;
        val2u.innerHTML = st;
      }
      function UC1() {
        var u1 = unitf[cat.value][val1u.value], u2 = unitf[cat.value][val2u.value],
            v = Number(val1.value), p1 = Number(val1p.value), p2 = Number(val2p.value);
        if (typeof u1 == 'number' && typeof u2 == 'number') {
          val2.value = v * u1 * p1 / p2 / u2;
        } else {
          val2.value = (v * u1[0] * p1 + u1[1] - u2[1]) / p2 / u2[0];
        }
      }
      function UC2() {
        var u1 = unitf[cat.value][val1u.value], u2 = unitf[cat.value][val2u.value],
            v = Number(val2.value), p1 = Number(val1p.value), p2 = Number(val2p.value);
        if (typeof u1 == 'number' && typeof u2 == 'number') {
          val1.value = v * u2 * p2 / p1 / u1;
        } else {
          val1.value = (v * u2[0] * p2 + u2[1] - u1[1]) / p1 / u1[0];
        }
      }
      onload = function () {
        UpdSels();
      }
    </script>
  </body>
</html>